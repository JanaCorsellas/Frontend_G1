<div class="container">
   
  <!-- Botón para crear usuario -->
  <div class="action-buttons">
    <button class="btn-create" (click)="showCreateUserForm()">
      <i class="material-icons">add</i> Crear nuevo usuario
    </button>
  </div>
  
  <!-- Inicialmente solo mostrar el botón de listar usuarios -->
  <div class="button-container" *ngIf="!usuariosListados">
    <button class="btn-listar" (click)="obtenerUsuarios()">
      Listar todos los usuarios
    </button>
  </div>
  
  <!-- Lista paginada de usuarios (visible solo después de hacer clic en el botón) -->
  <div class="users-container" *ngIf="usuariosListados">
    <!-- Tabla de usuarios -->
    <div class="users-grid">
      <div *ngFor="let user of users; trackBy: trackByUserId" 
           class="user-card">
        <div class="user-header">
          <img [src]="user.profilePicture || 'assets/default-profile.jpg'" 
               alt="Foto de perfil" 
               class="profile-image">
          <h3 class="user-name">{{ user.username }}</h3>
        </div>
        <div class="user-info">
          <p><strong>Email:</strong> {{ user.email }}</p>
          <p><strong>Nivel:</strong> {{ user.level || 'N/A' }}</p>
          <p class="user-bio"><strong>Bio:</strong> {{ user.bio || 'Sin biografía' }}</p>
        </div>
        <div class="user-actions">
          <button class="btn-edit" (click)="editarUsuario(user)">
            <i class="material-icons">edit</i> Editar
          </button>
          <button class="btn-hide" (click)="marcarUsuarioInvisible(user)">
            <i class="material-icons">visibility_off</i> Ocultar
          </button>
          <button class="btn-delete" (click)="eliminarUsuario(user)">
            <i class="material-icons">delete</i> Eliminar
          </button>
          <button class="btn-view" (click)="verDetallesUsuario(user)">
            <i class="material-icons">visibility</i> Ver
          </button>
        </div>
      </div>
    </div>
    
    <!-- Paginación -->
    <div class="pagination-controls">
      <button 
        class="pagination-btn" 
        [disabled]="currentPage === 1"
        (click)="changePage(currentPage - 1)">
        « Anterior
      </button>
      
      <span *ngFor="let page of pages" 
            class="page-number" 
            [class.active]="page === currentPage"
            (click)="changePage(page)">
        {{page}}
      </span>
      
      <button 
        class="pagination-btn" 
        [disabled]="currentPage === totalPages"
        (click)="changePage(currentPage + 1)">
        Siguiente »
      </button>
    </div>
    
    <div class="pagination-info">
      Mostrando página {{ currentPage }} de {{ totalPages }} 
      ({{ totalUsers }} usuarios en total)
    </div>
  </div>

  <!-- Sección de creación de usuario (a pantalla completa) -->
  <div class="full-screen-form" *ngIf="showCreateModal">
    <app-user-create (userCreated)="onUserCreated($event)"></app-user-create>
  </div>
</div>