<!-- src/app/components/user-edit/user-edit.component.html -->
<div class="container">
    <h2>Editar Usuario</h2>
    
    <div *ngIf="loading" class="spinner-border text-primary" role="status">
      <span class="sr-only">Cargando...</span>
    </div>
    
    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
    
    <form *ngIf="!loading" [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="username">Nombre de usuario</label>
        <input 
          type="text" 
          formControlName="username" 
          class="form-control" 
          [ngClass]="{ 'is-invalid': submitted && f.username.errors }" 
        />
        <div *ngIf="submitted && f.username.errors" class="invalid-feedback">
          <div *ngIf="f.username.errors.required">El nombre de usuario es obligatorio</div>
        </div>
      </div>
      
      <div class="form-group mt-3">
        <label for="email">Email</label>
        <input 
          type="email" 
          formControlName="email" 
          class="form-control" 
          [ngClass]="{ 'is-invalid': submitted && f.email.errors }" 
        />
        <div *ngIf="submitted && f.email.errors" class="invalid-feedback">
          <div *ngIf="f.email.errors.required">El email es obligatorio</div>
          <div *ngIf="f.email.errors.email">El email debe ser válido</div>
        </div>
      </div>
      
      <div class="form-group mt-3">
        <label for="bio">Biografía</label>
        <textarea 
          formControlName="bio" 
          class="form-control" 
        ></textarea>
      </div>
      
      <div class="form-group mt-3">
        <label for="profilePicture">URL de la foto de perfil</label>
        <input 
          type="text" 
          formControlName="profilePicture" 
          class="form-control" 
        />
      </div>
      
      <div class="form-group mt-3">
        <label for="level">Nivel</label>
        <input 
          type="number" 
          formControlName="level" 
          class="form-control" 
          [ngClass]="{ 'is-invalid': submitted && f.level.errors }" 
        />
        <div *ngIf="submitted && f.level.errors" class="invalid-feedback">
          <div *ngIf="f.level.errors.required">El nivel es obligatorio</div>
          <div *ngIf="f.level.errors.min">El nivel debe ser al menos 1</div>
        </div>
      </div>
      
      <div class="form-group mt-3">
        <button [disabled]="loading" class="btn btn-primary">
          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
          Guardar
        </button>
        <a routerLink="/users" class="btn btn-link">Cancelar</a>
      </div>
    </form>
  </div>